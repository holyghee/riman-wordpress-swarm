name: Deploy to Live Server

  on:
    push:
      branches:
        - main
    workflow_dispatch:

  jobs:
    deploy:
      name: Deploy to All-Inkl Server
      runs-on: ubuntu-latest

      steps:
      - name: Checkout Repository
        uses: actions/checkout@v4

      - name: Install sshpass
        run: sudo apt-get update && sudo apt-get install -y sshpass

      - name: Deploy WordPress Files
        run: |
          sshpass -p "${{ secrets.KAS_PASSWORD }}" rsync -avz --exclude='*.mp4' --exclude='*.jpg' --exclude='*.png' wp-content/plugins/ ${{ 
  secrets.SSH_USERNAME }}@${{ secrets.KAS_HOST }}:${{ secrets.REMOTE_PATH }}/wp-content/plugins/
          sshpass -p "${{ secrets.KAS_PASSWORD }}" rsync -avz --exclude='*.mp4' --exclude='*.jpg' --exclude='*.png' wp-content/themes/ ${{ 
  secrets.SSH_USERNAME }}@${{ secrets.KAS_HOST }}:${{ secrets.REMOTE_PATH }}/wp-content/themes/

      - name: Deployment Complete
        run: |
          echo "ðŸš€ WordPress deployment completed!"
          echo "ðŸ“‚ Deployed all code changes (excluding media files)"
